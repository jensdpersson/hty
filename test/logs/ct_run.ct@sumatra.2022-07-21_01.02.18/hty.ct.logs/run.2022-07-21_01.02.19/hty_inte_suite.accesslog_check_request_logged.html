<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Test hty_inte_SUITE:accesslog_check_request_logged result</title>
<meta http-equiv="cache-control" content="no-cache"></meta>
<meta http-equiv="content-type" content="text/html; charset=utf-8"></meta>
<link rel="stylesheet" href="../../ct_default.css" type="text/css"></link>
<script type="text/javascript" src="../../jquery-latest.js"></script>
<script type="text/javascript" src="../../jquery.tablesorter.min.js"></script>
</head>
<body>

<a name="top"></a><pre>
=== Test case: <a href="hty_inte_suite.src.html#accesslog_check_request_logged-1">hty_inte_SUITE:accesslog_check_request_logged/1</a> (click for source code)

=== Config value:

    [{wwwroot,"/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture"},
     {files_dir,"/home/jens/projekt/hty/ct/hty_inte_SUITE_data/accesslog/files"},
     {watchdog,&lt;0.284.0&gt;},
     {tc_logfile,"/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/hty_inte_suite.accesslog_check_request_logged.html"},
     {tc_group_properties,[{name,accesslog}]},
     {tc_group_path,[]},
     {data_dir,"/home/jens/projekt/hty/ct/hty_inte_SUITE_data/"},
     {priv_dir,"/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/"}]

=== Current directory is "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18"

=== Started at 2022-07-21 01:02:21

<br />
Conlen [&lt;&lt;"0"&gt;&gt;]

dispatching to {hty_bind_resource,"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}

record {hty_tx,{ipv4,{127,0,0,1},43695},
               &lt;&lt;"HTTP/1.1"&gt;&gt;,'GET',
               {[],["helloworld.txt"]},
               {200,"OK"},
               [{"connection",&lt;&lt;"keep-alive"&gt;&gt;},
                {"host",&lt;&lt;"localhost:1028"&gt;&gt;},
                {"te",&lt;&lt;&gt;&gt;},
                {"content-length",&lt;&lt;"0"&gt;&gt;}],
               [&lt;&lt;&gt;&gt;],
               #Fun&lt;hty_tx.0.61293378&gt;,q0,[],[],&lt;&lt;"guest"&gt;&gt;,hty_empty_realm,
               [{"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}],
               [],hty_socketreader,
               [{hty_bind_resource,"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}],
               [],0,false}

dispatching to {hty_accesslog_resource,"logger",
                   [{hty_static_resource,
                        {hty_fspath,
                            "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                            hty_fs_fs},
                        {hty_indexfile_welcome,
                            ["index.html","index.xml","index.txt"]}}]}

AccessLog.Handle
dispatching to {hty_static_resource,
                   {hty_fspath,
                       "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                       hty_fs_fs},
                   {hty_indexfile_welcome,
                       ["index.html","index.xml","index.txt"]}}

static path below [["helloworld.txt"],&lt;&lt;"helloworld.txt"&gt;&gt;,["helloworld.txt"]]

static subpath [{hty_fspath,"/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static/helloworld.txt",
                            hty_fs_fs}]

last_modified ["/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static/helloworld.txt"] is [{{2022,
                                                                                                                                                                                                                  7,
                                                                                                                                                                                                                  21},
                                                                                                                                                                                                                 {1,
                                                                                                                                                                                                                  2,
                                                                                                                                                                                                                  21}}]

If-None-Match: []!="\"2022-07-21T01:02:21\""

record {hty_tx,
           {ipv4,{127,0,0,1},43695},
           &lt;&lt;"HTTP/1.1"&gt;&gt;,'GET',
           {[],["helloworld.txt"]},
           {200,"OK"},
           [{"connection",&lt;&lt;"keep-alive"&gt;&gt;},
            {"host",&lt;&lt;"localhost:1028"&gt;&gt;},
            {"te",&lt;&lt;&gt;&gt;},
            {"content-length",&lt;&lt;"0"&gt;&gt;}],
           [&lt;&lt;&gt;&gt;],
           #Fun&lt;hty_tx.0.61293378&gt;,q0,
           [{'Content-Type',"text/plain"},
            {"Cache-Control","public"},
            {"ETag","\"2022-07-21T01:02:21\""}],
           [{file,
                "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static/helloworld.txt"}],
           &lt;&lt;"guest"&gt;&gt;,hty_empty_realm,
           [{"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}],
           [],hty_socketreader,
           [{hty_static_resource,
                {hty_fspath,
                    "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                    hty_fs_fs},
                {hty_indexfile_welcome,
                    ["index.html","index.xml","index.txt"]}},
            {hty_accesslog_resource,"logger",
                [{hty_static_resource,
                     {hty_fspath,
                         "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                         hty_fs_fs},
                     {hty_indexfile_welcome,
                         ["index.html","index.xml","index.txt"]}}]}],
           [{"hty_static_resource","2022-07-20T23:02:21.352","status","OK"},
            {"hty_static_resource","2022-07-20T23:02:21.352","sendfile",
             "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static/helloworld.txt"}],
           0,true}

Sending to logger {hty_filelog_logger,&lt;0.287.0&gt;}
record {hty_tx,
           {ipv4,{127,0,0,1},43695},
           &lt;&lt;"HTTP/1.1"&gt;&gt;,'GET',
           {[],["helloworld.txt"]},
           {200,"OK"},
           [{"connection",&lt;&lt;"keep-alive"&gt;&gt;},
            {"host",&lt;&lt;"localhost:1028"&gt;&gt;},
            {"te",&lt;&lt;&gt;&gt;},
            {"content-length",&lt;&lt;"0"&gt;&gt;}],
           [&lt;&lt;&gt;&gt;],
           #Fun&lt;hty_tx.0.61293378&gt;,q0,
           [{'Content-Type',"text/plain"},
            {"Cache-Control","public"},
            {"ETag","\"2022-07-21T01:02:21\""}],
           [{file,
                "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static/helloworld.txt"}],
           &lt;&lt;"guest"&gt;&gt;,hty_empty_realm,
           [{"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}],
           [],hty_socketreader,
           [{hty_accesslog_resource,"logger",
                [{hty_static_resource,
                     {hty_fspath,
                         "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                         hty_fs_fs},
                     {hty_indexfile_welcome,
                         ["index.html","index.xml","index.txt"]}}]}],
           [{"hty_static_resource","2022-07-20T23:02:21.352","status","OK"},
            {"hty_static_resource","2022-07-20T23:02:21.352","sendfile",
             "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static/helloworld.txt"}],
           0,true}

Logger got message ["2022-07-20T23:02:21.340",124,"2022-07-20T23:02:21.353",
                    124,
                    ["GET"," ",&lt;&lt;"/helloworld.txt"&gt;&gt;],
                    124,
                    [[" (","127",46,"0",46,"0",46,"1",58,"43695",41],
                     " ","200"," ","OK"],
                    10]

sendfile('"/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static/helloworld.txt"')

Sendfile ok

Looking for header content-type=text/plain in [{"cache-control","public"},
                                               {"etag",
                                                "\"2022-07-21T01:02:21\""},
                                               {"server","haughty 0.4"},
                                               {"content-type","text/plain"}]

Reading facit file /home/jens/projekt/hty/ct/hty_inte_SUITE_data/accesslog/files/accesslog_check_request_logged/facit.txt

About to compare facit [HELLO WORLD!
]
 with response body [HELLO WORLD!
]

Conlen [&lt;&lt;"0"&gt;&gt;]

dispatching to {hty_bind_resource,"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}

record {hty_tx,{ipv4,{127,0,0,1},36287},
               &lt;&lt;"HTTP/1.1"&gt;&gt;,'GET',
               {[],["logs"]},
               {200,"OK"},
               [{"connection",&lt;&lt;"keep-alive"&gt;&gt;},
                {"host",&lt;&lt;"localhost:1028"&gt;&gt;},
                {"te",&lt;&lt;&gt;&gt;},
                {"content-length",&lt;&lt;"0"&gt;&gt;}],
               [&lt;&lt;&gt;&gt;],
               #Fun&lt;hty_tx.0.61293378&gt;,q0,[],[],&lt;&lt;"guest"&gt;&gt;,hty_empty_realm,
               [{"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}],
               [],hty_socketreader,
               [{hty_bind_resource,"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}],
               [],0,false}

dispatching to {hty_accesslog_resource,"logger",
                   [{hty_static_resource,
                        {hty_fspath,
                            "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                            hty_fs_fs},
                        {hty_indexfile_welcome,
                            ["index.html","index.xml","index.txt"]}}]}

AccessLog.Handle
dispatching to {hty_static_resource,
                   {hty_fspath,
                       "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                       hty_fs_fs},
                   {hty_indexfile_welcome,
                       ["index.html","index.xml","index.txt"]}}

static path below [["logs"],&lt;&lt;"logs"&gt;&gt;,["logs"]]

static subpath [{hty_fspath,"/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static/logs",
                            hty_fs_fs}]

record {hty_tx,
           {ipv4,{127,0,0,1},36287},
           &lt;&lt;"HTTP/1.1"&gt;&gt;,'GET',
           {[],["logs"]},
           {404,"Not Found"},
           [{"connection",&lt;&lt;"keep-alive"&gt;&gt;},
            {"host",&lt;&lt;"localhost:1028"&gt;&gt;},
            {"te",&lt;&lt;&gt;&gt;},
            {"content-length",&lt;&lt;"0"&gt;&gt;}],
           [&lt;&lt;&gt;&gt;],
           #Fun&lt;hty_tx.0.61293378&gt;,q0,[],[],&lt;&lt;"guest"&gt;&gt;,hty_empty_realm,
           [{"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}],
           [],hty_socketreader,
           [{hty_static_resource,
                {hty_fspath,
                    "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                    hty_fs_fs},
                {hty_indexfile_welcome,
                    ["index.html","index.xml","index.txt"]}},
            {hty_accesslog_resource,"logger",
                [{hty_static_resource,
                     {hty_fspath,
                         "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                         hty_fs_fs},
                     {hty_indexfile_welcome,
                         ["index.html","index.xml","index.txt"]}}]}],
           [{"hty_static_resource","2022-07-20T23:02:21.372","status",
             "Not Found"}],
           0,false}

Sending to logger {hty_filelog_logger,&lt;0.287.0&gt;}
record {hty_tx,
           {ipv4,{127,0,0,1},36287},
           &lt;&lt;"HTTP/1.1"&gt;&gt;,'GET',
           {[],["logs"]},
           {404,"Not Found"},
           [{"connection",&lt;&lt;"keep-alive"&gt;&gt;},
            {"host",&lt;&lt;"localhost:1028"&gt;&gt;},
            {"te",&lt;&lt;&gt;&gt;},
            {"content-length",&lt;&lt;"0"&gt;&gt;}],
           [&lt;&lt;&gt;&gt;],
           #Fun&lt;hty_tx.0.61293378&gt;,q0,[],[],&lt;&lt;"guest"&gt;&gt;,hty_empty_realm,
           [{"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}],
           [],hty_socketreader,
           [{hty_accesslog_resource,"logger",
                [{hty_static_resource,
                     {hty_fspath,
                         "/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/2.logger.accesslog/static",
                         hty_fs_fs},
                     {hty_indexfile_welcome,
                         ["index.html","index.xml","index.txt"]}}]}],
           [{"hty_static_resource","2022-07-20T23:02:21.372","status",
             "Not Found"}],
           0,false}

Logger got message ["2022-07-20T23:02:21.371",124,"2022-07-20T23:02:21.372",
                    124,
                    ["GET"," ",&lt;&lt;"/logs"&gt;&gt;],
                    124,
                    [[" (","127",46,"0",46,"0",46,"1",58,"36287",41],
                     " ","404"," ","Not Found"],
                    10]

dispatching to {hty_logviewer_resource,"logger"}

File does exist {hty_fspath,"/home/jens/projekt/hty/ct/logs/ct_run.ct@sumatra.2022-07-21_01.02.18/hty.ct.logs/run.2022-07-21_01.02.19/log_private/accesslog/fixture/1028.http/1.logger,logger.bind/filelog/flat/2022-07-20.log",
                            hty_fs_fs} 

Checking tomorrow {hty_date,2022,7,21,0,0,0,0}

Checking tomorrow {hty_date,2022,7,21,0,0,0,0} ... false 

record {hty_tx,{ipv4,{127,0,0,1},36287},
               &lt;&lt;"HTTP/1.1"&gt;&gt;,'GET',
               {[],["logs"]},
               {200,"OK"},
               [{"connection",&lt;&lt;"keep-alive"&gt;&gt;},
                {"host",&lt;&lt;"localhost:1028"&gt;&gt;},
                {"te",&lt;&lt;&gt;&gt;},
                {"content-length",&lt;&lt;"0"&gt;&gt;}],
               [&lt;&lt;&gt;&gt;],
               #Fun&lt;hty_tx.0.61293378&gt;,q0,
               [{'Content-Type',&lt;&lt;"text/plain"&gt;&gt;}],
               [{data,[[&lt;&lt;"2022-07-20T23:02:21.371|2022-07-20T23:02:21.372|GET /logs| (127.0.0.1:36287) 404 Not Found\n"&gt;&gt;],
                       [&lt;&lt;"2022-07-20T23:02:21.340|2022-07-20T23:02:21.353|GET /helloworld.txt| (127.0.0.1:43695) 200 OK\n"&gt;&gt;]]}],
               &lt;&lt;"guest"&gt;&gt;,hty_empty_realm,
               [{"logger",[{hty_filelog_logger,&lt;0.287.0&gt;}]}],
               [],hty_socketreader,
               [{hty_logviewer_resource,"logger"}],
               [{"hty_logviewer_resource","2022-07-20T23:02:21.380","status",
                 "OK"},
                {"hty_static_resource","2022-07-20T23:02:21.372","status",
                 "Not Found"}],
               0,true}

data('[[&lt;&lt;"2022-07-20T23:02:21.371|2022-07-20T23:02:21.372|GET /logs| (127.0.0.1:36287) 404 Not Found\n"&gt;&gt;],
       [&lt;&lt;"2022-07-20T23:02:21.340|2022-07-20T23:02:21.353|GET /helloworld.txt| (127.0.0.1:43695) 200 OK\n"&gt;&gt;]]')

Looking for header content-type=text/plain in [{"server","haughty 0.4"},
                                               {"content-type","text/plain"}]

<a name="end"></a>


=== Ended at 2022-07-21 01:02:21
=== successfully completed test case
=== Returned value: ok
</pre>
<center>
<br /><hr /><p>
<a href="../../../all_runs.html">Test run history
</a>  |  <a href="../../../index.html">Top level test index
</a>  |  <a href="../../../suite.log.latest.html">Latest test result</a>
</p>
<div class="copyright">Copyright &copy; 2022 <a href="http://www.erlang.org">Open Telecom Platform</a><br />
Updated: <!--date-->Thu Jul 21 2022 01:02:21<!--/date--><br />
</div>
</center>
</body>
</html>
